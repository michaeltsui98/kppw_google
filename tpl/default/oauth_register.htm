<!--{include header}-->
	<div class="wrapper">
		<div class="container_24">
			<section class="clearfix section">
				<div class="box model green ">
        		<div class="inner">
				<header class="box_header clearfix pad10">
            	<div class="grid_5 alpha omega">
	            	<h1 class="box_title">{$_lang['improve_information']}</h1>
				</div>
					<div class="fl_l">
						<nav class="box_nav">
							<ul>
	                			<li><a href="{BASE_URL}/index.php/login/oauth?type=$type">{$_lang['account_bind']}</a></li>
							</ul>
						</nav>
					</div>
				</header>
	            <div class="box_detail clearfix po_re box">
	                <div class="grid_17" > 
	                    <div class="use_now">
	                	<img src="{BASE_URL}/static/img/ico/{$type}_t.gif" style="vertical-align:middle;" >
	                    <span class="font14">{$u['nick']}</span>
	               		</div>
	                                                
	                    <!--from±íµ¥ start-->
	                     <div class="form_box clearfix border_n">
                    			<form action="{BASE_URL}/index.php/register/bind" method="post" id="register_frm" name="register_frm">
                        			<input type="hidden" name="formhash" id="formhash" value="{FORMHASH}">
                        			<input type="hidden" name="handlekey" value="register_frm1">
									<input type="hidden" name="type" value="{$type}">
                        			<div class="rowElem clearfix po_re">
                            			<label class="grid_4">
                                			{$_lang['account']}
                            			</label>
                            			<div class="fl_l ">
                                			<input type="text" class="txt txt_input" autocomplete="off" name="txt_account" id="txt_account" limit="required:true;len:2-20;type:string;general:true" msg="{$_lang['username_input_error']}" ajax="{BASE_URL}/index.php/register/check_username?username=" title="{$_lang['please_input_register_account']}" msgArea="login_account_msg" style="width:200px;" />
                            				<span class="msg" id="login_account_msg"><i></i></span>
										</div>
									
                        			</div>

                        		<!--end ÕËºÅ--><!--ÃÜÂë-->
                        			<div class="rowElem clearfix po_re">
                            			<label class="grid_4">
                                			{$_lang['password']}
                            			</label>
                            			<div class="fl_l  ">
                                			<input class="txt_input" onKeyup="pwStrength(this.value)" style="width:200px;" type="password" name="pwd_password" id="pwd_password" maxlength="20" limit="required:true;len:6-20" msg="{$_lang['password_input_error']}" title="{$_lang['please_input_register_pw']}" msgArea="password_msg"/>
                            				<span class="msg" id="password_msg"></span>
										</div>
										
                        			<div class="clear"></div>
									<!--ÃÜÂëÇ¿¶È-->
									
										<div class="prefix_4">
                            		 	<div id="pwdStrength" class=" msg pw_strength">
	                                		<div class="pw_letter">
	                                			<span class="selected">{$_lang['weak']}</span>
												<span>{$_lang['general']}</span>
												<span>{$_lang['better']}</span>
											</div>
                           			 	</div>
										
										</div>
                        			</div>
									<!--Ç¿¶Èend-->
                        			<div class="rowElem clearfix po_re">
                            			<label class="grid_4">
                                			{$_lang['confirm_password']}
                            			</label>
                            			<div class="fl_l">
                                			<input class="txt_input" style="width:200px;" type="password" name="pwd_password2" id="pwd_password2" maxlength="20" limit="required:true;equals:pwd_password" msg="{$_lang['repeat_password_error']}" title="{$_lang['input_pw_agian']}" msgArea="password2_msg"/>
                            				<span class="msg" id="password2_msg"></span>
										</div>
										
                        			</div> 
                        		<!--end ÃÜÂë-->
								<!--ÓÊÏä-->
                        			<div class="rowElem clearfix po_re">
                            			<label class="grid_4">
                                			{$_lang['email']}
                            			</label>
                            			<div class="fl_l">
                                			<input class="txt_input" style="width:200px;" autocomplete="off" type="text" class="txt" name="txt_email" id="txt_email"limit="type:email;required:true;len:6-50" msg="{$_lang['email_error']}" title="{$_lang['email_format']}" ajax="{BASE_URL}/index.php/register/check_email?email=" msgArea="email_msg"/>
                            				<span class="" id="email_msg"></span>
										</div>
										
                        			</div>
                        	<!--end ÓÊÏä-->					
						 
							
                        <div class="mt_20 prefix_4 ml_5">
                            <button type="submit" class="button" onclick="return user_register();">
                                {$_lang['register']}
                            </button>
                        </div>
												
                        <p class="mt_20 prefix_4 ml_5">
                            <input  name="inputtext" type="checkbox" checked="checked" id="inputtext" limit="required:true"
							msg="{$_lang['you_should_agree_agreement']}" msgArea="login_msg"/> &nbsp;{$_lang['i_has_read_and_accpet']}<a  class="agreement_link" href="" target="_blank">{$_lang['register_agreement']}</a>{$_lang['and_copyright_notice']}
                        	<span id="login_msg"></span>
						</p>
	                        </form>
	                    </div>
	                </div>
	                <div class="grid_7 omega border_l_c">
	                    <div class="pad10">
                        <div class="pl_20">
                        	<span>{$_lang['use_friend_web_login']}</span>
							{loop $api_open $k $v}
								{if $_K[$k.'_app_id']}
		                            <div class="mt_10">
		                                <a href="{BASE_URL}/index.php/login/ologin?type=$k"><img src="{BASE_URL}/static/img/ico/{$k}_t.gif"  title="{$api_name[$k]['name']}">$api_name[$k]['name']{$_lang['login']}</a>
		                            </div>
								{/if}
							{/loop}
						</div>
                    </div>
	                </div>
	            </div>
				</div>
	            </div>
				
			</section>
		</div>
	</div>		
<div class="clear"></div>

<script type="text/javascript">
In('form'); 
	//×¢²á
	function user_register(){
		
	   if(checkForm(document.getElementById("register_frm"))){
			 showWindow('register_frm1', 'register_frm', 'post',0,{cover:1});
		}
		return false;  
	}
	$("#txt_code").focus(function(){
		$("#show_secode_menu_content").removeClass("hidden");
	});
	function checkStrong(sPW){
			var pwLength = 	sPW.length;
			  var patEn = /[a-zA-Z]/;
			  var patnum = /[0-9]/;
			  var speChar = /[`~!@#$\^&\*\(\)=\|{}':;',\/\?\[\]\.<>]/;
			  var isEn = patEn.test(sPW);
			  var isNum = patnum.test(sPW);
			  var isSpe = speChar.test(sPW);
			  Modes = getStrong(isEn,isNum,isSpe,pwLength);
		 return Modes; 
	}

	function getStrong (isEn,isNum,isSpe,pwLength){
		if (isEn && isNum && isSpe && (pwLength>6)){
			var setModes = 3;
		}else{
			var setModes = 2;
			if((isEn && isNum)||(isNum && isSpe)||(isEn&&isSpe)){
				var setModes = 2;
			}else{
				var setModes = 1;
			}
		}
		return setModes;
	}

	function pwStrength(pwd){ 
	  if (pwd==null||pwd==""){ 
	  	S_level = 0;
	  } else{ 
		  S_level=checkStrong(pwd); 
		  $("#pwdStrength span:lt("+S_level+")").addClass('selected');
		  $("#pwdStrength span:gt("+(S_level-1)+")").removeClass('selected'); 
	  } 

	}
</script>
 
<!--{include footer}-->